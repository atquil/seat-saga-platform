databaseChangeLog:
  - changeSet:
      id: create-show-table-sql
      author: atquil
      comment: "Creating Show Table - Links movies to screens"
      dbms: postgresql
      changes:
        - sql:
            sql: |
              CREATE TABLE seat_saga_show (
                id BIGINT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
                movie_id BIGINT NOT NULL,
                screen_id BIGINT NOT NULL,
                start_time TIMESTAMP NOT NULL,
                end_time TIMESTAMP NOT NULL,
                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                CONSTRAINT fk_show_movie FOREIGN KEY (movie_id)
                  REFERENCES seat_saga_movie(id),
                CONSTRAINT fk_show_screen FOREIGN KEY (screen_id)
                  REFERENCES seat_saga_screen(id)
              );
              COMMENT ON TABLE seat_saga_show IS 'Individual show timings for movies';
      rollback:
        - sql:
            sql: |
              DROP TABLE IF EXISTS seat_saga_show;
